{% extends 'admin_panel/base_admin.html' %}
{% block user_title %}CTAs - {{ site.domain }}{% endblock %}
{% block user_content %}
<div class="flex items-center justify-between mb-6">
  <h1 class="text-xl font-semibold">CTAs do Site</h1>
  <a href="{% url 'site_management:cta_create' site.id %}" class="px-4 py-2 bg-indigo-600 text-white text-sm rounded-md hover:bg-indigo-700"><i class="fas fa-plus mr-2"></i>Novo CTA</a>
</div>
<table class="min-w-full divide-y divide-gray-200 bg-white shadow rounded-lg">
  <thead class="bg-gray-50">
    <tr>
      <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Título</th>
      <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Ação</th>
      <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Botão</th>
      <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Ordem</th>
      <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Ativo</th>
      <th class="px-4 py-2"></th>
    </tr>
  </thead>
  <tbody class="divide-y divide-gray-200">
    {% for cta in ctas %}
    <tr>
      <td class="px-4 py-2 text-sm">{{ cta.title|default:'—' }}</td>
      <td class="px-4 py-2 text-sm">{{ cta.get_action_type_display }}</td>
      <td class="px-4 py-2 text-sm">{{ cta.button_text }}</td>
      <td class="px-4 py-2 text-sm">{{ cta.order }}</td>
      <td class="px-4 py-2 text-sm">
        {% if cta.is_active %}<span class="text-green-600 font-semibold">Sim</span>{% else %}<span class="text-red-600 font-semibold">Não</span>{% endif %}
      </td>
      <td class="px-4 py-2 text-sm text-right space-x-2">
        <a href="{% url 'site_management:cta_edit' cta.id %}" class="text-indigo-600 hover:text-indigo-900"><i class="fas fa-edit"></i></a>
        <form action="{% url 'site_management:cta_toggle_status' cta.id %}" method="post" class="inline">{% csrf_token %}<button class="text-yellow-600 hover:text-yellow-800" title="Ativar/Desativar"><i class="fas fa-power-off"></i></button></form>
        <form action="{% url 'site_management:cta_delete' cta.id %}" method="post" class="inline" onsubmit="return confirm('Excluir CTA?');">{% csrf_token %}<button class="text-red-600 hover:text-red-800"><i class="fas fa-trash"></i></button></form>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="px-4 py-6 text-center text-sm text-gray-500">Nenhum CTA cadastrado.</td></tr>
    {% endfor %}
  </tbody>
</table>
<div class="mt-6">
  <a href="{% url 'site_management:site_detail' site.id %}" class="text-sm text-indigo-600 hover:text-indigo-800"><i class="fas fa-arrow-left mr-1"></i>Voltar</a>
</div>
{% endblock %}
