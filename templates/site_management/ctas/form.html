{% extends 'admin_panel/base_admin.html' %}
{% block user_title %}{% if is_edit %}Editar CTA{% else %}Novo CTA{% endif %} - {{ site.domain }}{% endblock %}
{% block user_content %}
<h1 class="text-xl font-semibold mb-6">{% if is_edit %}Editar CTA{% else %}Novo CTA{% endif %}</h1>
<form method="post" enctype="multipart/form-data" class="space-y-6 bg-white p-6 shadow rounded-md">{% csrf_token %}
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <label class="block text-sm font-medium text-gray-700">Imagem</label>
      {{ form.image }}
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700">Título</label>
      {{ form.title }}
    </div>
    <div class="md:col-span-2">
      <label class="block text-sm font-medium text-gray-700">Descrição</label>
      {{ form.description }}
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700">Ação</label>
      {{ form.action_type }}
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700">Texto do Botão</label>
      {{ form.button_text }}
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700">Ordem</label>
      {{ form.order }}
    </div>
    <div class="flex items-center space-x-2">
      {{ form.is_active }} <span class="text-sm font-medium text-gray-700">Ativo</span>
    </div>
  </div>
  <div class="flex items-center space-x-3 pt-4 border-t">
    <button type="submit" class="px-4 py-2 bg-indigo-600 text-white text-sm rounded-md hover:bg-indigo-700">Salvar</button>
    <a href="{% url 'site_management:cta_list' site.id %}" class="text-sm text-gray-600 hover:text-gray-800">Cancelar</a>
  </div>
</form>
{% if form.errors %}
  <div class="mt-4 bg-red-50 border border-red-200 text-red-800 text-sm rounded p-4">
    <ul class="list-disc pl-5 space-y-1">
      {% for field, errors in form.errors.items %}
        {% for error in errors %}
          <li><strong>{{ form.fields[field].label }}:</strong> {{ error }}</li>
        {% endfor %}
      {% endfor %}
    </ul>
  </div>
{% endif %}
<div class="mt-6">
  <a href="{% url 'site_management:site_detail' site.id %}" class="text-sm text-indigo-600 hover:text-indigo-800"><i class="fas fa-arrow-left mr-1"></i>Voltar</a>
</div>
{% endblock %}
